{% load static %}

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{% block title %}Game Store{% endblock %}</title>

    <!-- Main app styles -->
    <link rel="stylesheet" href="{% static 'css/app.css' %}">
  </head>
  <body>
    <!-- HEADER / NAVBAR -->
    <header class="tt-header">
      <div class="tt-container">
        <div class="tt-header-inner">

          <!-- Brand: always goes to product list -->
          <a href="{% url 'product_list' %}" class="tt-brand">
            <span class="tt-logo">🎮</span>
            <span>Game Store</span>
          </a>

          <!-- Search: submits ?q=... to product_list -->
          <form class="tt-search" method="get" action="{% url 'product_list' %}">
            <input
              class="tt-search-input"
              type="text"
              name="q"
              placeholder="Search (demo only)"
              value="{{ request.GET.q|default_if_none:'' }}"
            >
            <button type="submit" class="tt-btn tt-btn-ghost">
              Search
            </button>
          </form>

          <!-- Right-side actions -->
          <div class="tt-actions">
            <!-- Cart button -->
            <a href="{% url 'cart_detail' %}" class="tt-btn tt-btn-ghost">
              🛒 Cart
            </a>

            {% if user.is_authenticated %}
              {% if user.is_staff %}
                <!-- Staff only: add product -->
                <a href="{% url 'product_create' %}" class="tt-btn tt-btn-primary">
                  + Add Product
                </a>
              {% endif %}

              <!-- User chip -->
              <div class="tt-chip">
                <div class="tt-chip-dot">
                  {{ user.username|first|upper }}
                </div>
                <span>{{ user.username }}</span>
              </div>

              <!-- Logout -->
              <a href="{% url 'logout' %}" class="tt-btn tt-btn-ghost">
                Logout
              </a>
            {% else %}
              <!-- Not logged in: show Login / Signup -->
              <a href="{% url 'login' %}" class="tt-btn tt-btn-ghost">
                Login
              </a>
              <a href="{% url 'signup' %}" class="tt-btn tt-btn-primary">
                Sign up
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </header>

    <!-- MAIN PAGE CONTENT -->
    <main class="tt-page">
      <div class="tt-container page-content">
        {% if messages %}
          <ul>
            {% for message in messages %}
              <li>{{ message }}</li>
            {% endfor %}
          </ul>
        {% endif %}

        {% block content %}{% endblock %}
      </div>
    </main>
  </body>
</html>
